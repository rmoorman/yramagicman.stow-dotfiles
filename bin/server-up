#!/usr/bin/env zsh
sudo systemctl restart httpd.service
sudo systemctl restart mysqld
sudo systemctl restart redis
if [[ -f /usr/lib/systemd/system/dynamodb.service ]]; then
    sudo systemctl restart dynamodb.service
    (
    cd ~/Sites/livtrax_socket
    ts-node ~/Sites/livtrax_socket/util/createDriverTable.ts
    ts-node ~/Sites/livtrax_socket/util/createHistoryTable.ts
    ts-node ~/Sites/livtrax_socket/util/createLogTable.ts
)
fi
if [[ -f ./docker-compose.yml ]]; then
    sudo systemctl restart docker
    sudo docker-compose up -d
fi

systemctl status httpd.service mysqld redis | grep -E 'Loaded|Active'
if [[ -f /usr/lib/systemd/system/dynamodb.service ]]; then
    sudo systemctl status dynamodb.service | grep -E 'Loaded|Active'
fi
# if [[ -z "$(ip addr show | grep 10.0.1.16)" ]]; then
#     sudo ip addr add 10.0.1.16/24 broadcast 10.0.1.255 dev lo
# fi
