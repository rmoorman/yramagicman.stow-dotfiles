#!/usr/bin/env zsh

function update() {
    sudo -v
    gup
    if [[ $(command -v nixos-rebuild) ]] ; then
        sudo nixos-rebuild boot --upgrade
        nix-collect-garbage -d --delete-older-than 14d
        nix store optimise
    elif [[ $(command -v yay) ]]; then
        yay -Syu --noconfirm --sudoloop
        xmonad --recompile
        orphans
        echo '' > /tmp/updates
    elif [[ $(command -v pacman) ]]; then
        pacman -Syu --noconfirm
        xmonad --recompile
        orphans
        echo '' > /tmp/updates
    elif [[ $(command -v apt) ]]; then
        sudo apt update
        sudo apt upgrade
    elif [[ $(command -v zypper) ]]; then
        sudo zypper refresh
        sudo zypper dup
    fi
    bell
}
